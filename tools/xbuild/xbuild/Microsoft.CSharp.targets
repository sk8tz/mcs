<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

	<!--	xbuild Import support is flawed so we need to put everything into one file. -->
	<!-- COMMON -->

	<PropertyGroup>
		<TargetExt Condition="'$(OutputType)' == 'Winexe'">.exe</TargetExt>
		<TargetExt Condition="'$(OutputType)' == 'Exe'">.exe</TargetExt>
		<TargetExt Condition="'$(OutputType)' == 'Library'">.dll</TargetExt>
		<TargetExt Condition="'$(OutputType)' == 'Netmodule'">.netmodule</TargetExt>
	</PropertyGroup>

	<PropertyGroup>
		<AllowUnsafeBlocks Condition="'$(AllowUnsafeBlocks)' == ''">false</AllowUnsafeBlocks>
		<AssemblyName Condition="'$(AssemblyName)' == ''">$(RootNamespace)</AssemblyName>
		<!--<OutputPath Condition="'$(OutputPath)' != ''">$(OutputPath)\</OutputPath>-->
		<WarningLevel Condition="'$(WarningLevel)' == ''" >2</WarningLevel>
	</PropertyGroup>

	<Target Name="PrepareForBuild">
		<Message Importance="High" Text="Configuration: $(Configuration) Platform: $(Platform)"/>
		
		<MakeDir 
			Condition="'$(OutputPath)' != ''"
			Directories="$(OutputPath)"
		/>
	</Target>

	<Target Name="ResolveAssemblyReferences">
		<ResolveAssemblyReference
			Assemblies="@(Reference)"
			SearchPaths=" "
		>
			<Output TaskParameter="ResolvedFiles" ItemName="ResolvedFiles"/>
		</ResolveAssemblyReference>
	</Target>

	<Target Name="Build" DependsOnTargets="PrepareForBuild;ResolveAssemblyReferences;CoreCompile"/>

	<!-- END OF COMMON -->


	<PropertyGroup>
		<DefaultLanguageSourceExtension>.cs</DefaultLanguageSourceExtension>
		<Language>C#</Language>
	</PropertyGroup>

	<PropertyGroup>
		<DebugSymbols Condition=" '$(DebugType)' == 'none' ">false</DebugSymbols>
		<DebugType    Condition=" '$(DebugType)' == 'none' "></DebugType>
	</PropertyGroup>

	<ItemGroup>
		<DocFileItem Include="$(DocumentationFile)" Condition="'$(DocumentationFile)' != ''"/>
	</ItemGroup>

	<Target
		Name="CoreCompile"
		Inputs="@(Compile)"
		Outputs="$(OutputPath)$(AssemblyName)$(TargetExt)"
	>
		<Csc
			AdditionalLibPaths="$(AdditionalLibPaths)"
			AddModules="@(AddModules)"
			AllowUnsafeBlocks="$(AllowUnsafeBlocks)"
			BaseAddress="$(BaseAddress)"
			CheckForOverflowUnderflow="$(CheckForOverflowUnderflow)"
			CodePage="$(CodePage)"
			DebugType="$(DebugType)"
			DefineConstants="$(DefineConstants)"
			DelaySign="$(DelaySign)"
			DisabledWarnings="$(_DisabledWarnings)"
			DocumentationFile="@(DocFileItem)"
			EmitDebugInformation="$(DebugSymbols)"
			ErrorReport="$(ErrorReport)"
			FileAlignment="$(FileAlignment)"
			GenerateFullPaths="$(GenerateFullPaths)"
			KeyContainer="$(KeyContainerName)"
			KeyFile="$(KeyOriginatorFile)"
			LangVersion="$(LangVersion)"
			MainEntryPoint="$(StartupObject)"
			ModuleAssemblyName="$(ModuleAssemblyName)"
			NoConfig="true"
			NoLogo="$(NoLogo)"
			NoStandardLib="$(NoStdLib)"
			Optimize="$(Optimize)"
			OutputAssembly="$(OutputPath)$(AssemblyName)$(TargetExt)"
			PdbFile="$(PdbFile)" 
			Platform="$(PlatformTarget)"
		 	References="@(ResolvedFiles)"
			ResponseFiles="$(CompilerResponseFile)"
			Sources="@(Compile)"
			TargetType="$(OutputType)"
			TreatWarningsAsErrors="$(TreatWarningsAsErrors)"
			UseHostCompilerIfAvailable="$(UseHostCompilerIfAvailable)"
			Utf8Output="$(Utf8Output)"
			WarningLevel="$(WarningLevel)"
			WarningsAsErrors="$(WarningsAsErrors)"
			Win32Icon="$(Win32Icon)"
			Win32Resource="$(Win32Resource)"
		/>
			<!-- Resources="@(ManifestResourceWithNoCulture);@(ManifestNonResxWithNoCultureOnDisk);@(CompiledLicenseFile)" -->
			<!-- ToolPath="$(CscToolPath)" -->

	</Target>

</Project>
