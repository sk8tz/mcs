<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

	<PropertyGroup>
		<TargetExt Condition="'$(OutputType)' == 'Winexe'">.exe</TargetExt>
		<TargetExt Condition="'$(OutputType)' == 'Exe'">.exe</TargetExt>
		<TargetExt Condition="'$(OutputType)' == 'Library'">.dll</TargetExt>
		<TargetExt Condition="'$(OutputType)' == 'Netmodule'">.netmodule</TargetExt>
	</PropertyGroup>

	<PropertyGroup>
		<AllowUnsafeBlocks Condition="'$(AllowUnsafeBlocks)' == ''">false</AllowUnsafeBlocks>
		<AssemblyName Condition="'$(AssemblyName)' == ''">$(RootNamespace)</AssemblyName>
		<!--<OutputPath Condition="'$(OutputPath)' != ''">$(OutputPath)\</OutputPath>-->
		<WarningLevel Condition="'$(WarningLevel)' == ''" >2</WarningLevel>
	</PropertyGroup>

	<Target Name="PrepareForBuild">
		<MakeDir 
			Condition="'$(OutputPath)' != ''"
			Directories="$(OutputPath)"
		/>
	</Target>

	<Target Name="ResolveAssemblyReferences">
		<ResolveAssemblyReference
			Assemblies="@(Reference)"
		>
			<Output TaskParameter="ResolvedFiles" ItemName="ResolvedFiles"/>
		</ResolveAssemblyReference>
	</Target>

	<Target Name="Build" DependsOnTargets="PrepareForBuild;ResolveAssemblyReferences">
		<Csc
			AllowUnsafeBlocks="$(AllowUnsafeBlocks)"
			DefineConstants="$(DefineConstants)"
			NoConfig="true"
			OutputAssembly="$(OutputPath)$(AssemblyName)$(TargetExt)"
			References="@(ResolvedFiles)"
			Sources="@(Compile)"
			TargetType="$(OutputType)"
			WarningLevel="$(WarningLevel)"
		/>
	</Target>

</Project>
