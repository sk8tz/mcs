<?Mapping ClrNamespace="Xaml.TestVocab.Console" Assembly="TestVocab.dll" XmlNamespace="console" ?>

<ConsoleApp xmlns="console" 
		xmlns:x="http://schemas.microsoft.com/winfx/xaml/2005" 
		x:Class="DemoConsoleApp"
		SomethingHappened="printHi">
	<ConsoleWriter>IT BEGINS!</ConsoleWriter>
	<ConsoleWriter x:Name="_greeter" Text="Hello World" />
	<ConsoleWriter Text="I'm surrounded!" Filter="stringFilter" />
	<ConsoleReader Variable="thingo">
		<ConsoleReader.Prompt>
			<ConsoleWriter>What should I say?</ConsoleWriter>
		</ConsoleReader.Prompt>
	</ConsoleReader>
	<ConsoleWriter>
		<ConsoleWriter.Text>
			<ConsoleValueVar Variable="thingo" />
		</ConsoleWriter.Text>
	</ConsoleWriter>
	<ConsoleWriter>
		<ConsoleApp.Repetitions>3</ConsoleApp.Repetitions>
		<ConsoleWriter.Text>Goodbye.</ConsoleWriter.Text>
	</ConsoleWriter>
	<ConsoleWriter ConsoleApp.Repetitions="2">Bye</ConsoleWriter>
	<x:Code><![CDATA[
		public static void Main(string[] args)
		{
			DemoConsoleApp c = new DemoConsoleApp();
			c._greeter.Run();
			c.Run();
		}

		private string stringFilter(string s)
		{
			return "YYY" + s + "ZZZ";
		}

		private void printHi()
		{
			//this code is run before every call to IConsoleAction.Run() by ConsoleApp, 
			//uncomment it to see that happening
			//System.Console.WriteLine("Hi there, something's about to happen!");
		}
	]]></x:Code>
</ConsoleApp>
