<?xml version="1.0" encoding="iso-8859-1"?>

<!-- NAnt build file for Mono.Data.MySql.dll -->

<project name="Mono.Data.MySql" default="build">
	<property name="debug" value="false"/>

	<target name="build">
		<csc target="library" output="../lib/Mono.Data.MySql.dll" debug="${debug}">
			<arg value="/nowarn:1595"/>
			<arg value="/nowarn:0067"/>
			<arg value="/nowarn:0109"/>
			<arg value="/nowarn:0169"/>
			<arg value="/nowarn:0649"/>
			<arg value="/unsafe"/>
			<arg value="/noconfig"/>
			<arg value="/r:System.dll"/>
			<arg value="/r:System.Xml.dll"/>
			<arg value="/r:System.Data.dll"/>
			<sources>
				<includes name="**/*.cs"/> 
				<excludes name="Test/**"/>
				<excludes name="Mono.Data.MySql/Test.cs"/>
				<excludes name="Mono.Data.MySql/MySqlClientPermission.cs"/>
				<excludes name="Mono.Data.MySql/MySqlClientPermissionAttribute.cs"/>
				<excludes name="Mono.Data.MySql/MySqlCommandBuilder.cs"/>
				<excludes name="Mono.Data.MySql/MySqlDataAdapter.cs"/>
				<excludes name="Mono.Data.MySql/MySqlDataReader.cs"/>
				<excludes name="Mono.Data.MySql/MySqlError.cs"/>
				<excludes name="Mono.Data.MySql/MySqlErrorCollection.cs"/>
				<excludes name="Mono.Data.MySql/MySqlException.cs"/>
				<excludes name="Mono.Data.MySql/MySqlInfoMessageEventArgs.cs"/>
				<excludes name="Mono.Data.MySql/MySqlInfoMessageEventHandler.cs"/>
				<excludes name="Mono.Data.MySql/MySqlParameter.cs"/>
				<excludes name="Mono.Data.MySql/MySqlParameterCollection.cs"/>
				<excludes name="Mono.Data.MySql/MySqlRowUpdatedEventArgs.cs"/>
				<excludes name="Mono.Data.MySql/MySqlRowUpdatedEventHandler.cs"/>
				<excludes name="Mono.Data.MySql/MySqlRowUpdatingEventArgs.cs"/>
				<excludes name="Mono.Data.MySql/MySqlRowUpdatingEventHandler.cs"/>
				<excludes name="Mono.Data.MySql/MySqlTransaction.cs"/>
				
			</sources>
			<references>
				<includes name="../lib/corlib.dll"/>
				<includes name="../lib/System.dll"/>
				<includes name="../lib/System.Xml.dll"/>
				<includes name="../lib/System.Data.dll"/>
			</references>
		</csc>
		<copy file="../lib/System.Data.dll" tofile="Test/System.Data.dll"/>
		<copy file="../lib/Mono.Data.MySql.dll" tofile="Test/Mono.Data.MySql.dll"/>
		<copy file="../lib/Mono.Data.MySql.dll" tofile="Mono.Data.MySql/Mono.Data.MySql.dll"/>
		<copy file="../lib/Mono.Data.MySql.dll" tofile="../System.Data/Test/Mono.Data.MySql.dll"/>
	</target>
	<target name="test" depends="build">
		<nant basedir="Test" target="test"/>
	</target>
	<target name="clean">
		<delete file="../lib/System.Data.dll" failonerror="false"/>
		<delete file="Test/System.Data.dll" failonerror="false"/>
		<delete file="../lib/Mono.Data.MySql.dll" failonerror="false"/>
		<delete file="Test/Mono.Data.MySql.dll" failonerror="false"/>

	</target>
</project>
