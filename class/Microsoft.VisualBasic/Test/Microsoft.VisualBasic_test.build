<?xml version="1.0" encoding="iso-8859-1"?>

<!-- NAnt build file for System.Data_test.dll -->
<!-- Target build (default) builds tests -->
<!-- Target test runs tests -->

<project name="System.Data_test" default="build">
	<property name="debug" value="false"/>

	<target name="build">
	</target>

	<target name="assemblies">
		<csc target="library" output="Microsoft.VisualBasic_test.dll" debug="${debug}">
			<arg value="/nowarn:1595"/>
			<sources>
				<includes name="**/*.cs"/>
				<excludes name="TheTests.cs"/>
			</sources>
			<arg value="/noconfig"/>	<!-- don't reference ms assemblies -->
			<!--<arg value="/lib:../../lib/"/>-->
			
			<!-- cor compare dies with these currently -->
			<!--<arg value="/nostdlib"/>--> 	<!-- don't reference mscorlib -->
			<!--<arg value="/r:corlib.dll"/>-->
			<arg value="/r:System.dll"/>
			<arg value="/r:.\Microsoft.VisualBasic.dll"/>
		    	<arg value="/r:..\..\..\nunit20\NUnit.Framework.dll"/>
		</csc>

<!--
		<csc target="exe" output="RunTests.Microsoft.VisualBasic.exe" debug="${debug}">
			<sources>
				<includes name="**/*.cs"/>
				<excludes name="AllTests.cs"/>
			</sources>
			<arg value="/nowarn:1595"/>
			<arg value="/noconfig"/>
			<arg value="/r:..\..\lib\corlib.dll"/>
			<arg value="/r:..\..\lib\System.dll"/>
			<arg value="/r:..\..\lib\Microsoft.VisualBasic.dll"/>
		    	<arg value="/r:..\..\..\nunit20\NUnit.Framework.dll"/>
		</csc>

-->
	</target>

	<target name="test" depends="assemblies">
		<exec program="..\..\..\nunit20\nunit-console.exe" commandline="Microsoft.VisualBasic_test.dll" failonerror="false"/>
	</target>

	<target name="clean">
		<delete file="Microsoft.VisualBasic.dll" failonerror="false"/>
		<delete file="Microsoft.VisualBasic_test.dll" failonerror="false"/>
		<delete file="corlib.dll" failonerror="false"/>
		<delete file="System.dll" failonerror="false"/>
	</target>
</project>
